---

title: Welcome to crm_m5


keywords: fastai
sidebar: home_sidebar

summary: "A package built for the M5-Accuracy competition on Kaggle."
description: "A package built for the M5-Accuracy competition on Kaggle."
nb_path: "projects/m5/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: projects/m5/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install chrisrichardmiles</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use-with-command-line">How to use with command line<a class="anchor-link" href="#How-to-use-with-command-line"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.-Create-data-folders,-download-data,-and-unzip-files">1. Create data folders, download data, and unzip files<a class="anchor-link" href="#1.-Create-data-folders,-download-data,-and-unzip-files"> </a></h3><ul>
<li>If you have your kaggle api info in root/.kaggle/kaggle.json then run: 
<pre><code>crm_download_kaggle_data --comp_name m5-forecasting-accuracy</code></pre>
</li>
<li>Otherwise, you must run: 
<pre><code>crm_mkdirs_data
cd data/raw</code></pre>
<ul>
<li>Now manully download the data zipfile from <a href="https://www.kaggle.com/c/m5-forecasting-accuracy/data">kaggle</a> and upload it into the data/raw folder.
<pre><code>unzip * 
cd ../..</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="2.">2.<a class="anchor-link" href="#2."> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Some-lessons-I-learned">Some lessons I learned<a class="anchor-link" href="#Some-lessons-I-learned"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="RAM-issues">RAM issues<a class="anchor-link" href="#RAM-issues"> </a></h3><ul>
<li>Computing rolling window statistics can be very expensive, but can be ok if we do processing in smaller sections like we do with <code>n_splits</code> in the <a href="/chrisrichardmiles/feature_engineering.html#rolling_window"><code>rolling_window</code></a> statistics calculations.</li>
<li>Datatype matter: float32 and float16 datatypes can save a lot of RAM, but be careful for float16, which might cause accuracy problems or completely break a process, like when trying to use <code>StandardScaler</code> with float16 datatypes resulted in all zeros. </li>
<li>Be careful with Pandas DataFrames. I had a lot of problems where I was unmindfully creating large copies of data, such as a saving function, looking something like <code>df[cols].to_csv(....)</code> which was making an entirely new dataframe in memory before saving. This was remedied by using the <code>usecols</code> param in <code>df.to_csv</code></li>
<li>Be careful with DataFrame names. It seems that it is better to keep the same name of a DataFrame when doing things like concating an existing df with new data. Its like pandas will use memory more intelligently. So this: <code>df2 = pd.concat([df1, pd.read_csv('data.csv')]; del df2</code> should be replaced with <code>df1 = pd.concat([df1, pd.read_csv('data.csv')]</code>. It seems like it should work the same, but my experience with RAM crashes seems to indicate the second method is much better.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Organization-is-hard-for-me,-but-most-important">Organization is hard for me, but most important<a class="anchor-link" href="#Organization-is-hard-for-me,-but-most-important"> </a></h3><p>The first iteration of this project was code that was spread accross hundreds of kaggle notebooks. I ran experiments by running a notebook and just looking at the result. It always felt ok while I was doing it, and it worked since the</p>

</div>
</div>
</div>
</div>
 

